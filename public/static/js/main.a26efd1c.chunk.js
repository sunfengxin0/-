(this.webpackJsonppersontodolist=this.webpackJsonppersontodolist||[]).push([[0],{146:function(e,t,a){e.exports=a(310)},151:function(e,t,a){},310:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(2),o=a.n(i),l=(a(151),a(54)),r=a(55),c=a(27),m=a(66),u=a(64),d=a(314),h=a(313),p=a(315),f=a(22),g=a(6),b=a.n(g),v=a(317),E=a(318),y=a(312),w=a(13),_=a.n(w),k={labelCol:{span:4},wrapperCol:{span:20}},C={wrapperCol:{offset:17,span:9}},x=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).loginRef=s.a.createRef(),e.registerormRef=s.a.createRef(),e.onFinish=function(t){var a=Object(c.a)(e);_.a.post("/login",{username:t.username,password:t.password}).then((function(e){p.a.success("\u767b\u5f55\u6210\u529f"),a.props.handleCancel(a),a.props.islogin()})).catch((function(e){p.a.error("\u767b\u5f55\u5bc6\u7801\u6216\u7528\u6237\u540d\u9519\u8bef")}))},e.registeronFinish=function(t){var a=Object(c.a)(e);_.a.post("/register",{username:t.username,password:t.password}).then((function(e){p.a.success("\u6ce8\u518c\u7528\u6237\u6210\u529f"),a.props.showModal(a)})).catch((function(e){p.a.error("\u6ce8\u518c\u7528\u6237\u5931\u8d25")}))},e}return Object(r.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"loginAndRegister"},s.a.createElement(h.a,{title:"\u767b\u5f55\u7a97\u53e3",visible:this.props.visible,onOk:this.props.handleOk,onCancel:this.props.handleCancel.bind(this,this),footer:null},s.a.createElement(y.a,Object.assign({},k,{name:"basic",ref:this.loginRef,onFinish:this.onFinish}),s.a.createElement(y.a.Item,{label:"\u7528\u6237\u540d",name:"username",validateTrigger:"onBlur",rules:[{required:!0,message:"Please input your username!"}]},s.a.createElement(d.a,null)),s.a.createElement(y.a.Item,{label:"\u5bc6\u7801",validateTrigger:"onBlur",name:"password",rules:[{required:!0,message:"Please input your password!"}]},s.a.createElement(d.a.Password,null)),s.a.createElement(y.a.Item,C,s.a.createElement(f.a,{style:{float:"left"},onClick:this.props.showModal2.bind(this,this)},"\u6ce8\u518c"),s.a.createElement(f.a,{style:{float:"left",marginLeft:"8px"},type:"primary",htmlType:"submit"},"\u767b\u5f55")))),s.a.createElement(h.a,{title:"\u6ce8\u518c\u7a97\u53e3",visible:this.props.visible2,onCancel:this.props.handleCancel2.bind(this,this),footer:null},s.a.createElement(y.a,Object.assign({},k,{name:"register",ref:this.registerormRef,onFinish:this.registeronFinish}),s.a.createElement(y.a.Item,{name:"username",label:"\u7528\u6237\u540d",validateTrigger:"onBlur",rules:[{min:6,message:"\u7528\u6237\u540d\u6700\u5c11\u4e3a6\u4f4d"},{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]},s.a.createElement(d.a,null)),s.a.createElement(y.a.Item,{name:"password",validateTrigger:"onBlur",label:"\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"},{min:6,message:"\u5bc6\u7801\u7684\u957f\u5ea6\u81f3\u5c11\u4e3a6\u4f4d"}],hasFeedback:!0},s.a.createElement(d.a.Password,null)),s.a.createElement(y.a.Item,{name:"confirm",validateTrigger:"onBlur",label:"\u786e\u8ba4\u5bc6\u7801",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u5bc6\u7801"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("\u4e24\u6b21\u5e94\u5f53\u8f93\u5165\u540c\u6837\u7684\u5bc6\u7801\uff01"):Promise.resolve()}}}]},s.a.createElement(d.a.Password,null)),s.a.createElement(y.a.Item,C,s.a.createElement(f.a,{onClick:this.props.showModal.bind(this,this)},"\u767b\u5f55"),s.a.createElement(f.a,{type:"primary",htmlType:"submit",style:{marginLeft:"8px"}},"\u6ce8\u518c")))))}}]),a}(n.Component),N=d.a.Search,B=h.a.confirm,D=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).changeStute=function(e){_.a.put("/modifytodolistitem",e).then((function(e){n.getItemsData()})).catch((function(e){console.log(e)}))},n.deleteItmes=function(e){console.log(e),_.a.delete("/deletetodolistitem?uid="+n.state.userid+"&itemid="+e).then((function(e){n.getItemsData()})).catch((function(e){console.log(e)}))},n.showModalNotClear=function(){n.setState({visible:!0,visible2:!1})},n.showModal=function(e){e.registerormRef.current.resetFields(),n.setState({visible:!0,visible2:!1})},n.showModal2=function(e){e.loginRef.current.resetFields(),n.setState({visible2:!0,visible:!1})},n.handleCancel=function(e){e.loginRef.current.resetFields(),n.setState({visible:!1})},n.handleCancel2=function(e){e.registerormRef.current.resetFields(),n.setState({visible2:!1})},n.islogin=function(){n.state.username||_.a.get("/islogin?time="+(new Date).getTime()).then((function(e){n.setState({username:e.data.username,userid:e.data.uid}),n.getItemsData()})).catch((function(e){console.log(e)}))},n.logout=function(){var e=Object(c.a)(n);B({title:"\u60a8\u8981\u9000\u51fa\u767b\u5f55\u5417",icon:s.a.createElement(v.a,null),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){_.a.get("/logout").then((function(t){e.setState({userid:"",username:"",items:[]})})).catch((function(e){console.log(e)}))},onCancel:function(){}})},n.additem=function(e){_.a.post("/newtodolistitem",{uid:n.state.userid,item:e,status:!1}).then((function(e){console.log(e),p.a.success("\u6dfb\u52a0\u6761\u76ee\u6210\u529f"),n.getItemsData()})).catch((function(e){console.log(e)}))},n.getItemsData=function(){_.a.get("/gettodolist?uid="+n.state.userid).then((function(e){n.setState({items:e.data.data.toDoListItems})})).catch((function(e){console.log(e)}))},n.state={visible:!1,visible2:!1,userid:"",username:"",items:[]},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.islogin()}},{key:"render",value:function(){var e,t=this,a=0,n=0,i=this.state.items.map((function(e){return!e.status&&(a++,s.a.createElement("li",{key:e._id,className:b.a.items},s.a.createElement("input",{type:"checkbox",checked:e.status,onChange:t.changeStute.bind(t,{itemid:e._id,item:e.item,status:!0}),className:b.a.checkbox}),s.a.createElement("span",{className:b.a.itemsName},e.item),s.a.createElement(E.a,{className:b.a.closeBtn,onClick:t.deleteItmes.bind(t,e._id)})))})),o=this.state.items.map((function(e){return e.status?(n++,s.a.createElement("li",{key:e._id,className:b.a.items,style:{opacity:"0.5"}},s.a.createElement("input",{type:"checkbox",checked:e.status,onChange:t.changeStute.bind(t,{itemid:e._id,item:e.item,status:!1}),className:b.a.checkbox}),s.a.createElement("span",{className:b.a.itemsName},e.item),s.a.createElement(E.a,{className:b.a.closeBtn,onClick:t.deleteItmes.bind(t,e._id)}))):null}));return e=this.state.username?s.a.createElement("div",{style:{fontSize:"20px",lineHeight:"45px",marginLeft:"10px",color:"#1890ff",cursor:"pointer"},onClick:this.logout},this.state.username):s.a.createElement(f.a,{className:b.a.loginBtn,onClick:this.showModalNotClear},"\u767b\u5f55"),s.a.createElement("div",{className:"main",style:{position:"relative",overflow:"hidden"}},s.a.createElement("div",{className:b.a.topBar},s.a.createElement("div",{className:b.a.w,style:{display:"flex"}},s.a.createElement("i",{className:b.a.logo},"ToDoList"),s.a.createElement(N,{style:{float:"right",flex:"1",marginTop:"8px",marginLeft:"20px"},placeholder:"\u8f93\u5165\u5f85\u6dfb\u52a0\u9879\u76ee",enterButton:"\u6dfb\u52a0\u9879\u76ee",onSearch:this.additem}),e)),s.a.createElement("div",{className:b.a.body},s.a.createElement("div",{className:b.a.w},s.a.createElement("div",{style:{height:"30px",fontSize:"20px",lineHeight:"40px"}},s.a.createElement("div",{style:{float:"left"}},"\u6b63\u5728\u8fdb\u884c"),s.a.createElement("div",{style:{float:"right"}},"\u5269\u4f59\u4e2a\u6570\uff1a",a)),s.a.createElement("div",null,s.a.createElement("ul",{className:b.a.tudolist},i)),s.a.createElement("div",{style:{marginTop:"20px",height:"30px",fontSize:"20px",lineHeight:"40px"}},s.a.createElement("div",{style:{float:"left"}},"\u5df2\u7ecf\u5b8c\u6210"),s.a.createElement("div",{style:{float:"right"}},"\u5b8c\u6210\u4e2a\u6570\uff1a",n)),s.a.createElement("div",null,s.a.createElement("ul",{className:b.a.tudolist},o)))),s.a.createElement(x,{visible:this.state.visible,visible2:this.state.visible2,showModal:this.showModal,showModal2:this.showModal2,handleCancel:this.handleCancel,handleCancel2:this.handleCancel2,islogin:this.islogin}))}}]),a}(n.Component);a(309);_.a.defaults.withCredentials=!0,_.a.defaults.baseURL="http://localhost";var L=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(D,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports={topBar:"toDoList_topBar__23Ydy",w:"toDoList_w__rZ8zt",logo:"toDoList_logo__uyTLW",loginBtn:"toDoList_loginBtn__2K92d",body:"toDoList_body__acogh",tudolist:"toDoList_tudolist__3Oczj",items:"toDoList_items__2BCP7",checkbox:"toDoList_checkbox__3xk1T",itemsName:"toDoList_itemsName__20yyy",closeBtn:"toDoList_closeBtn__2Q4TN"}}},[[146,1,2]]]);
//# sourceMappingURL=main.a26efd1c.chunk.js.map